**练习题1 - NIO Server 实现**
---
题目描述：
设计并实现一个基于Java NIO的非阻塞TCP服务器，能够处理多个客户端并发连接请求。服务器应具备以下功能：

1. 使用`Selector`选择器监听并管理客户端连接请求。
2. 使用`ServerSocketChannel`接收新连接，并为每个新连接分配一个独立的`SocketChannel`。
3. 客户端发送字符串消息到服务器时，服务器应能正确接收并回显相同的消息给客户端。
4. 服务器应能够通过复用已注册的`Selector`在单个线程内高效地处理多个客户端通信。

要求：
- 提交核心代码逻辑，并简要解释关键步骤。
- 描述如何避免`Reactor模式`中的空轮询问题。
- 分析与传统BIO服务器相比，此NIO服务器在资源利用和性能上的优势。

实现:
- 参见tcp_server的代码;

**练习题2 - NIO Multiplexer 实现文件传输**
---
题目描述：
构建一个Java应用程序，它使用NIO的`FileChannel`与`Selector`结合实现一个简单的文件传输服务。
服务器端接收客户端上传的文件，并将其保存到本地指定目录；
客户端则可以从本地选择一个文件并将其发送到服务器。

1. 服务器端应当能够接收客户端发送的数据，将接收到的数据写入到本地文件系统的一个新文件中。
2. 客户端应当允许用户选择一个本地文件，并通过`SocketChannel`以非阻塞方式将文件内容发送给服务器。
3. 利用`ByteBuffer`进行数据读写，并确保在大量数据传输过程中，既能有效利用缓冲又能防止内存溢出。

要求：
- 设计并实现服务器和客户端两端的NIO数据传输逻辑。
- 解释如何利用`transferTo()`或`transferFrom()`方法优化大文件传输效率。
- 分析在高并发场景下，如果采用NIO进行文件传输相比传统IO有哪些改进。

**练习题3 - NIO Chat Room 实现**
---
题目描述：
开发一个基于Java NIO的多用户聊天室程序。服务器需要维持一个房间的概念，允许多个用户同时在线聊天，每个用户的消息都能广播给所有已连接的其他用户。

1. 服务器端需要维护一个用户列表，以及每个用户的SocketChannel，以便能够将一条消息发送给所有在线用户。
2. 客户端应当实现登录功能，并在成功连接后能够向服务器发送和接收文本消息。
3. 当一个用户发送消息时，服务器应该能够异步地将消息转发给其他所有已连接的客户端。

要求：
- 设计并实现消息的读取、编码、解码以及广播的过程。
- 使用`Charset`类处理字符集转换，保证不同平台间的兼容性。
- 分析在聊天室场景下，如何利用NIO的Selector来实现高效的事件驱动处理，并且讨论在此应用场景中，为什么选择NIO而非BIO或者AIO。



两道更深入的Java NIO编程实践题目

**练习题4 - NIO Datagram Channel 实现UDP通信**
---
题目描述：
设计并实现一个基于Java NIO的UDP通信程序，包括服务器端和客户端。服务器端负责接收客户端发送的消息，并广播返回给所有已连接的客户端；
客户端可以向服务器发送消息，并接收来自服务器和其他客户端的消息。

1. 使用`DatagramChannel`实现服务器端对UDP数据报文的接收与发送，同时使用`Selector`监控多路通道。
2. 在客户端同样使用`DatagramChannel`进行消息的发送与接收，并处理可能存在的丢包重传等问题。
3. 考虑到UDP是无连接的，设计一种机制使得服务器能够有效地管理并回应所有客户端的消息。

要求：
- 描述并实现UDP数据报的打包、解包过程。
- 分析在使用NIO进行UDP通信时，如何处理突发流量和错误检测。
- 对比TCP和UDP在使用NIO进行网络编程时的区别与优缺点。

**练习题5 - NIO File Channel 的零拷贝技术应用**
---
题目描述：
设计并实现一个文件传输服务，利用Java NIO的FileChannel和ByteBuffer支持的零拷贝特性，提升大文件传输的效率。

1. 服务器端创建一个`ServerSocketChannel`监听连接请求，当接收到客户端的文件传输请求时，直接将接收到的数据写入磁盘，期间尽量减少内存到内存的数据复制。
2. 客户端从本地文件系统中选择一个大文件，利用`FileChannel`和`ByteBuffer`的直接缓冲区实现零拷贝，将文件内容直接发送给服务器。

要求：
- 理解并实现Java NIO中的直接缓冲区（Direct Buffer）及其在零拷贝技术中的作用。
- 详细阐述在该场景下，操作系统层面如何配合Java NIO实现零拷贝，提高文件传输性能。
- 对比分析使用零拷贝技术前后的系统资源利用率和传输效率。